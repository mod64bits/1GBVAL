(function(){'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var f=0;return function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return f?f.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<a.length;++f){var b=a[f];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,b){if(a==Array.prototype||a==Object.prototype)return a;a[f]=b.value;return a};$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";
var $jscomp$lookupPolyfilledValue=function(a,f){var b=$jscomp.propertyToPolyfillSymbol[f];if(null==b)return a[f];b=a[b];return void 0!==b?b:a[f]};$jscomp.polyfill=function(a,f,b,d){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,f,b,d):$jscomp.polyfillUnisolated(a,f,b,d))};
$jscomp.polyfillUnisolated=function(a,f,b,d){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var c=a[d];if(!(c in b))return;b=b[c]}a=a[a.length-1];d=b[a];f=f(d);f!=d&&null!=f&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(a,f,b,d){var c=a.split(".");a=1===c.length;d=c[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var h=0;h<c.length-1;h++){var e=c[h];if(!(e in d))return;d=d[e]}c=c[c.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[c]:null;f=f(b);null!=f&&(a?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:f}):f!==b&&($jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+c,c=
$jscomp.propertyToPolyfillSymbol[c],$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:f})))};
$jscomp.polyfill("Promise",function(a){function f(){this.batch_=null}function b(e){return e instanceof c?e:new c(function(m,g){m(e)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;f.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var m=this;this.asyncExecuteFunction(function(){m.executeBatch_()})}this.batch_.push(e)};var d=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(e){d(e,0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=
this.batch_;this.batch_=[];for(var m=0;m<e.length;++m){var g=e[m];e[m]=null;try{g()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};f.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e;})};var c=function(e){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var m=this.createResolveAndReject_();try{e(m.resolve,m.reject)}catch(g){m.reject(g)}};c.prototype.createResolveAndReject_=function(){function e(k){return function(l){g||(g=!0,
k.call(m,l))}}var m=this,g=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}};c.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof c)this.settleSameAsPromise_(e);else{a:switch(typeof e){case "object":var m=null!=e;break a;case "function":m=!0;break a;default:m=!1}m?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}};c.prototype.resolveToNonPromiseObj_=function(e){var m=void 0;try{m=e.then}catch(g){this.reject_(g);
return}"function"==typeof m?this.settleSameAsThenable_(m,e):this.fulfill_(e)};c.prototype.reject_=function(e){this.settle_(2,e)};c.prototype.fulfill_=function(e){this.settle_(1,e)};c.prototype.settle_=function(e,m){if(0!=this.state_)throw Error("Cannot settle("+e+", "+m+"): Promise already settled in state"+this.state_);this.state_=e;this.result_=m;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};c.prototype.scheduleUnhandledRejectionCheck_=function(){var e=
this;d(function(){if(e.notifyUnhandledRejection_()){var m=$jscomp.global.console;"undefined"!==typeof m&&m.error(e.result_)}},1)};c.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=$jscomp.global.CustomEvent,m=$jscomp.global.Event,g=$jscomp.global.dispatchEvent;if("undefined"===typeof g)return!0;"function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof m?e=new m("unhandledrejection",{cancelable:!0}):(e=$jscomp.global.document.createEvent("CustomEvent"),
e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.result_;return g(e)};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)h.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var h=new f;c.prototype.settleSameAsPromise_=function(e){var m=this.createResolveAndReject_();e.callWhenSettled_(m.resolve,m.reject)};c.prototype.settleSameAsThenable_=function(e,m){var g=this.createResolveAndReject_();
try{e.call(m,g.resolve,g.reject)}catch(k){g.reject(k)}};c.prototype.then=function(e,m){function g(A,H){return"function"==typeof A?function(F){try{k(A(F))}catch(r){l(r)}}:H}var k,l,q=new c(function(A,H){k=A;l=H});this.callWhenSettled_(g(e,k),g(m,l));return q};c.prototype.catch=function(e){return this.then(void 0,e)};c.prototype.callWhenSettled_=function(e,m){function g(){switch(k.state_){case 1:e(k.result_);break;case 2:m(k.result_);break;default:throw Error("Unexpected state: "+k.state_);}}var k=
this;null==this.onSettledCallbacks_?h.asyncExecute(g):this.onSettledCallbacks_.push(g);this.isRejectionHandled_=!0};c.resolve=b;c.reject=function(e){return new c(function(m,g){g(e)})};c.race=function(e){return new c(function(m,g){for(var k=$jscomp.makeIterator(e),l=k.next();!l.done;l=k.next())b(l.value).callWhenSettled_(m,g)})};c.all=function(e){var m=$jscomp.makeIterator(e),g=m.next();return g.done?b([]):new c(function(k,l){function q(F){return function(r){A[F]=r;H--;0==H&&k(A)}}var A=[],H=0;do A.push(void 0),
H++,b(g.value).callWhenSettled_(q(A.length-1),l),g=m.next();while(!g.done)})};return c},"es6","es3");$jscomp.checkStringArgs=function(a,f,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.owns=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,f){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var c in d)$jscomp.owns(d,c)&&(a[c]=d[c])}return a};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var f=function(c,h){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};f.prototype.toString=function(){return this.$jscomp$symbol$id_};var b=0,d=function(c){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new f("jscomp_symbol_"+(c||"")+"_"+b++,c)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<f.length;b++){var d=$jscomp.global[f[b]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,f){a instanceof String&&(a+="");var b=0,d=!1,c={next:function(){if(!d&&b<a.length){var h=b++;return{value:f(h,a[h]),done:!1}}d=!0;return{done:!0,value:void 0}}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(f,b,d){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==d||d>c)d=c;d=Number(d);0>d&&(d=Math.max(0,c+d));for(b=Number(b||0);b<d;b++)this[b]=f;return this}},"es6","es3");$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};
$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Array.from",function(a){return a?a:function(f,b,d){b=null!=b?b:function(m){return m};var c=[],h="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];if("function"==typeof h){f=h.call(f);for(var e=0;!(h=f.next()).done;)c.push(b.call(d,h.value,e++))}else for(h=f.length,e=0;e<h;e++)c.push(b.call(d,f[e],e));return c}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},f=Object.create(new $jscomp.global.Proxy(a,{get:function(b,d,c){return b==a&&"q"==d&&c==f}}));return!0===f.q}catch(b){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(a){function f(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),l=Object.seal({}),q=new a([[k,2],[l,3]]);if(2!=q.get(k)||3!=q.get(l))return!1;q.delete(k);q.set(l,4);return!q.has(k)&&4==q.get(l)}catch(A){return!1}}function b(){}function d(k){var l=typeof k;return"object"===l&&null!==k||"function"===l}function c(k){if(!$jscomp.owns(k,e)){var l=new b;$jscomp.defineProperty(k,e,{value:l})}}function h(k){if(!$jscomp.ISOLATE_POLYFILLS){var l=Object[k];l&&(Object[k]=
function(q){if(q instanceof b)return q;Object.isExtensible(q)&&c(q);return l(q)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(f())return a;var e="$jscomp_hidden_"+Math.random();h("freeze");h("preventExtensions");h("seal");var m=0,g=function(k){this.id_=(m+=Math.random()+1).toString();if(k){k=$jscomp.makeIterator(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}};g.prototype.set=function(k,l){if(!d(k))throw Error("Invalid WeakMap key");
c(k);if(!$jscomp.owns(k,e))throw Error("WeakMap key fail: "+k);k[e][this.id_]=l;return this};g.prototype.get=function(k){return d(k)&&$jscomp.owns(k,e)?k[e][this.id_]:void 0};g.prototype.has=function(k){return d(k)&&$jscomp.owns(k,e)&&$jscomp.owns(k[e],this.id_)};g.prototype.delete=function(k){return d(k)&&$jscomp.owns(k,e)&&$jscomp.owns(k[e],this.id_)?delete k[e][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function f(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),k=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var l=k.entries(),q=l.next();if(q.done||q.value[0]!=g||"s"!=q.value[1])return!1;q=l.next();return q.done||4!=q.value[0].x||"t"!=q.value[1]||!l.next().done?!1:!0}catch(A){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(f())return a;var b=new WeakMap,d=function(g){this.data_={};this.head_=e();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var k;!(k=g.next()).done;)k=k.value,this.set(k[0],k[1])}};d.prototype.set=function(g,k){g=0===g?0:g;var l=c(this,g);l.list||(l.list=this.data_[l.id]=[]);l.entry?l.entry.value=k:(l.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:k},l.list.push(l.entry),
this.head_.previous.next=l.entry,this.head_.previous=l.entry,this.size++);return this};d.prototype.delete=function(g){g=c(this,g);return g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.data_[g.id],g.entry.previous.next=g.entry.next,g.entry.next.previous=g.entry.previous,g.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=e();this.size=0};d.prototype.has=function(g){return!!c(this,g).entry};d.prototype.get=function(g){return(g=
c(this,g).entry)&&g.value};d.prototype.entries=function(){return h(this,function(g){return[g.key,g.value]})};d.prototype.keys=function(){return h(this,function(g){return g.key})};d.prototype.values=function(){return h(this,function(g){return g.value})};d.prototype.forEach=function(g,k){for(var l=this.entries(),q;!(q=l.next()).done;)q=q.value,g.call(k,q[1],q[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var c=function(g,k){var l=k&&typeof k;"object"==l||"function"==l?b.has(k)?l=b.get(k):
(l=""+ ++m,b.set(k,l)):l="p_"+k;var q=g.data_[l];if(q&&$jscomp.owns(g.data_,l))for(g=0;g<q.length;g++){var A=q[g];if(k!==k&&A.key!==A.key||k===A.key)return{id:l,list:q,index:g,entry:A}}return{id:l,list:q,index:-1,entry:void 0}},h=function(g,k){var l=g.head_;return $jscomp.iteratorPrototype(function(){if(l){for(;l.head!=g.head_;)l=l.previous;for(;l.next!=l.head;)return l=l.next,{done:!1,value:k(l)};l=null}return{done:!0,value:void 0}})},e=function(){var g={};return g.previous=g.next=g.head=g},m=0;
return d},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(f,b){return b})}},"es8","es3");$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(f,b){return[f,b]})}},"es6","es3");$jscomp.findInternal=function(a,f,b){a instanceof String&&(a=String(a));for(var d=a.length,c=0;c<d;c++){var h=a[c];if(f.call(b,h,c,a))return{i:c,v:h}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(f,b){return $jscomp.findInternal(this,f,b).i}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(a){return a?a:function(f){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var b,d,c;for(b=c=0;b<arguments.length;b++)c=Math.max(c,Math.abs(arguments[b]));if(1E100<c||1E-100>c){if(!c)return c;for(b=d=0;b<arguments.length;b++){var h=Number(arguments[b])/c;d+=h*h}return Math.sqrt(d)*c}for(b=d=0;b<arguments.length;b++)h=Number(arguments[b]),d+=h*h;return Math.sqrt(d)}},"es6","es3");
(function(a){function f(d){if(b[d])return b[d].exports;var c=b[d]={i:d,l:!1,exports:{}};a[d].call(c.exports,c,c.exports,f);c.l=!0;return c.exports}var b={};f.m=a;f.c=b;f.d=function(d,c,h){f.o(d,c)||Object.defineProperty(d,c,{enumerable:!0,get:h})};f.r=function(d){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})};f.t=function(d,c){c&1&&(d=f(d));if(c&8||c&4&&"object"===typeof d&&d&&d.__esModule)return d;
var h=Object.create(null);f.r(h);Object.defineProperty(h,"default",{enumerable:!0,value:d});if(c&2&&"string"!=typeof d)for(var e in d)f.d(h,e,function(m){return d[m]}.bind(null,e));return h};f.n=function(d){var c=d&&d.__esModule?function(){return d["default"]}:function(){return d};f.d(c,"a",c);return c};f.o=function(d,c){return Object.prototype.hasOwnProperty.call(d,c)};f.p="";return f(f.s=157)})({0:function(a,f,b){var d=b(35);a.exports=function(c,h,e){h=d(h);h in c?Object.defineProperty(c,h,{value:e,
enumerable:!0,configurable:!0,writable:!0}):c[h]=e;return c};a.exports.__esModule=!0;a.exports["default"]=a.exports},10:function(a,f,b){function d(r){return requestAnimationFrame(function(){return requestAnimationFrame(function(){return r()})})}function c(r,B){return function(M){return Math.min(Math.max(M,r),B)}}function h(r,B,M,L){r.addEventListener(M,function(K){for(var I=K.target;I;){if(I.matches(B)){L(I,K);break}I=I.parentElement}},!1)}function e(){for(var r=this,B=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:function(){},M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,L=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,K=arguments.length,I=Array(3<K?K-3:0),y=3;y<K;y++)I[y-3]=arguments[y];var C;return function(){C?clearTimeout(C):L&&B.apply(r,I);C=window.setTimeout(function(){!L&&I&&B.apply(r,I)},M)}}function m(r,B,M){var L;return function(){if(!L){L=!0;for(var K=arguments.length,I=Array(K),y=0;y<K;y++)I[y]=arguments[y];r.apply(M||this,I);window.setTimeout(function(){return L=
!1},B)}}}function g(r,B){return!r.matches||r.matches(B)?r:r.closest(B)}function k(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1001,B=1/r;return Array(r).fill(0).map(function(M,L){return L*B})}function l(r){return new Promise(function(B){return window.setTimeout(B,r)})}b.d(f,"i",function(){return d});b.d(f,"g",function(){return q});b.d(f,"h",function(){return A});b.d(f,"j",function(){return H});b.d(f,"a",function(){return c});b.d(f,"c",function(){return h});b.d(f,"b",function(){return e});
b.d(f,"k",function(){return m});b.d(f,"d",function(){return g});b.d(f,"e",function(){return k});b.d(f,"f",function(){return F});b.d(f,"l",function(){return l});a=b(21);b.n(a);a=b(20);b.n(a);var q=function(){return Object.create(null)},A=function(){var r=null,B=null,M=null,L=q();return{successCaller:function(K){var I;null===(I=B)||void 0===I?void 0:I(K)},failureCaller:function(K){var I;null===(I=M)||void 0===I?void 0:I(K)},statusPending:function(){return!!r},getPromise:function(){return r},cancelPromise:function(){"function"===
typeof L.resolve&&(L.resolve(),r=null)},createPromise:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};if(r)return r;L=q();L.promise=new Promise(function(I){return L.resolve=I});r=new Promise(function(I,y){B=I;M=y;K(B,M)});return Promise.race([L.promise,r]).then(function(I){r=B=M=null;return I})}}},H=function(r){var B=-1;return{getCount:function(){return B},reset:function(){B=-1},decrement:function(){return--B},increment:function(){return++B},createUid:function(){var M=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",L="id-".concat(r);""!==M&&(L+="-".concat(M));return L+="-".concat(B)}}},F="rtl"===document.documentElement.dir},101:function(a,f,b){function d(){q=960>L.node().offsetWidth;var u=Math.floor(1.5*window.innerHeight);K.style("height","".concat(window.innerHeight-60,"px"));I.style("height","".concat(u,"px"))}function c(){d();l.resize();A&&A.resize().render(C);var u=document.querySelector(".ytt-page-progress"),x=new Event("ytt-progress-update");
u.dispatchEvent(x)}function h(u){u=u.index;0===u?(A.data(H).resize().render(u),y.text(H[0].values[0].trend)):1===u?(A.data(F).render(u),y.text(F[0].values[0].trend)):2===u&&(A.data(r).render(u),y.text(r[0].values[0].trend));C=u}function e(u){u=u.map(function(x){return{date:z("".concat(x.date)),views:+x.index,trend:x.trend,market:x.market,week:R(z("".concat(x.date))),marketName:M.get(x.market)}});return d3.nest().key(function(x){return x.market}).entries(u)}function m(){d();A=K.datum(H).scrollTemplate();
y.text(H[0].values[0].trend);var u="".concat(Math.floor(.625*window.innerHeight),"px");l.setup({step:".scroll article .step",offset:q?u:.8,debug:!1}).onStepEnter(h);c()}a=b(28);var g=b.n(a),k=b(71);a=b(53);b(159);var l=new a.a,q=!1,A=[],H=[],F=[],r=[],B=[],M=null,L=d3.select('[data-js="scroll"]'),K=L.select('[data-js="scroll__figure"]'),I=L.select('[data-js="scroll__article"]').selectAll('[data-js="article__step"]'),y=K.select(".figure--title span"),C="setup",z=d3.timeParse("%Y%m%d"),R=d3.timeFormat("%V");
f.a={init:function(){Object(k.a)(["iso.csv","global.csv","global-trend.csv","market-level-trend.csv"]).then(function(u){B=u[0];var x=B.map(function(O){return[O.Code,O.Name]});M=new Map(x);u=u.map(function(O,P){return e(O)});u=g()(u,4);B=u[0];H=u[1];F=u[2];r=u[3];m()})},resize:c}},102:function(a,f,b){function d(y){y=y.map(function(C){return{date:I(C.date),views:+C.index,trend:C.trend.replace(/\s+/g,"-"),market:L.get(C.market)}});return d3.nest().key(function(C){return C.trend}).key(function(C){return C.market}).entries(y)}
function c(y){var C=y.$selTrend,z=y.sectionData;y=y.sectionID;var R=C.attr("data-js");z=z.filter(function(u){return u.key===R})[0];C.select(".trend__container").attr("data-section",y);C=C.select(".trend__container").datum(z).ridgeTemplate();C.resize().render();B.push(C)}function h(y){y=y.select(".ridge-legend").datum(r[0][0].values[0]).legendTemplate();y.resize().render();B.push(y)}function e(){var y=d3.select(this),C=y.attr("data-section"),z=M.findIndex(function(u){return u===C}),R=r[z];y.selectAll(".trend").each(function(u,
x,O){u=d3.select(O[x]);c({$selTrend:u,sectionData:R,sectionID:C})});h(y)}function m(){var y=d3.select(this),C=y.classed("is-flipped");y.classed("is-flipped",!C)}function g(){H.each(function(y,C,z){y=d3.select(z[C]);C=y.attr("data-iso");y.select(".market-name").text(L.get(C))})}function k(){var y=d3.select(this),C=y.attr("data-section"),z=y.attr("data-market");y.datum({thisSection:C,thisMarket:z,GEO:K}).cardGlobe().resize().render()}function l(y){y.map(function(C,z){if(0===z){var R=C.map(function(u){return[u.Code,
u.Name]});L=new Map(R)}else 1===z&&(K=C);if(1<z)return r.push(d(C)),r});A.each(e);H.on("click",m);F.each(k);g()}a=b(160);b.n(a);a=b(161);b.n(a);a=b(162);b.n(a);var q=b(71);b=d3.select('[data-js="ridge"]');var A=b.selectAll('[data-js="ridge__trend"]'),H=b.selectAll(".trend"),F=b.selectAll(".card-globe"),r=[],B=[],M=["social","selfcare","identity"],L=null,K=[],I=d3.timeParse("%Y%m%d");f.a={init:function(){var y=M.map(function(C){return"".concat(C,".csv")});y.unshift("custom.geojson");y.unshift("iso.csv");
Object(q.a)(y).then(l)},resize:function(){B.forEach(function(z){z.resize().render()});var y=document.querySelector(".ytt-page-progress"),C=new Event("ytt-progress-update");y.dispatchEvent(C)}}},157:function(a,f,b){b(158);a.exports=b(163)},158:function(a,f,b){function d(){var l=g.node().offsetWidth;k!==l&&(k=l,c.a.resize(),h.a.resize())}b.r(f);var c=b(101),h=b(102),e=b(10),m=b(29),g=d3.select("body"),k=0;(function(){var l=new m.a;g.classed("is-mobile",l.mobile);window.addEventListener("resize",Object(e.b)(d,
150));c.a.init();h.a.init();l=document.querySelector(".ytt-page-progress");var q=new Event("ytt-progress-update");l.dispatchEvent(q)})()},159:function(a,f,b){a=b(28);var d=b.n(a),c=b(71);d3.selection.prototype.scrollTemplate=function(h){h=this.nodes().map(function(e){function m(D,w){D=d()(D,4);var G=D[0],Q=D[1],t=D[2],N=D[3];w=d()(w,4);var J=w[0],U=w[1],X=w[2],Y=w[3];J-=G;U-=Q;X-=t;Y-=N;var T=Array(4);return function(V){V=Math.hypot(T[0]=G+J*V,T[1]=Q+U*V,T[2]=t+X*V,T[3]=N+Y*V);T[0]/=V;T[1]/=V;T[2]/=
V;T[3]/=V;return T}}function g(D,w){D=d()(D,4);var G=D[0],Q=D[1],t=D[2],N=D[3];w=d()(w,4);var J=w[0],U=w[1],X=w[2],Y=w[3];w=G*J+Q*U+t*X+N*Y;0>w&&(J=-J,U=-U,X=-X,Y=-Y,w=-w);if(.9995<w)return m([G,Q,t,N],[J,U,X,Y]);var T=Math.acos(Math.max(-1,Math.min(1,w))),V=Array(4);w=Math.hypot(J-=G*w,U-=Q*w,X-=t*w,Y-=N*w);J/=w;U/=w;X/=w;Y/=w;return function(ba){var aa=T*ba;ba=Math.sin(aa);aa=Math.cos(aa);V[0]=G*aa+J*ba;V[1]=Q*aa+U*ba;V[2]=t*aa+X*ba;V[3]=N*aa+Y*ba;return V}}function k(D){D=d()(D,3);var w=D[0],G=
D[1],Q=D[2];w*=Math.PI/360;G*=Math.PI/360;Q*=Math.PI/360;D=Math.sin(w);w=Math.cos(w);var t=Math.sin(G);G=Math.cos(G);var N=Math.sin(Q);Q=Math.cos(Q);return[w*G*Q+D*t*N,D*G*Q-w*t*N,w*t*Q+D*G*N,w*G*N-D*t*Q]}function l(D,w){var G=g(k(D),k(w));return function(Q){Q=G(Q);var t=d()(Q,4);Q=t[0];var N=t[1],J=t[2];t=t[3];return[180*Math.atan2(2*(Q*N+J*t),1-2*(N*N+J*J))/Math.PI,180*Math.asin(Math.max(-1,Math.min(1,2*(Q*J-t*N))))/Math.PI,180*Math.atan2(2*(Q*t+N*J),1-2*(J*J+t*t))/Math.PI]}}function q(){var D=
d3.select(this.parentNode).select("path"),w=D.node().getTotalLength();return function(G){G=D.node().getPointAtLength(G*w);return"translate(".concat(G.x,", ").concat(G.y,")")}}function A(){var D=r.append("defs").append("linearGradient").attr("id","stroke-gradient-scroll");D.attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");D.append("stop").attr("offset","".concat(R,"%")).attr("stop-color","#DBDDE0").attr("stop-opacity","100%");D.append("stop").attr("offset","".concat(R,"%")).attr("stop-color",
"#754d8d").attr("stop-opacity","100%")}function H(D){O.fitSize([fa(C)-fa(z[0]),x/2],D).center([0,0]).rotate([0,-30]);K.select(".path-sphere").attr("d",P(ha)).style("fill","white").style("stroke-width","1px").lower();var w=K.select(".g-countries").selectAll(".path-country").data(D.features);w.exit().remove();w.enter().append("path").attr("class",function(G){return"path-country country-".concat(G.properties.iso_a2)}).merge(w).attr("d",P);y=D}var F=d3.select(e),r=null,B=null,M=null,L=null,K=null,I=F.datum(),
y=null,C=new Date(2020,2,15);e=I[0].values.map(function(D){return D.date});var z=d3.extent(e),R=Math.round((C-z[0])/(z[1]-z[0])*100),u=0,x=0,O=d3.geoOrthographic(),P=d3.geoPath(O),ha={type:"Sphere"},ia=[0,0],ka=[0,0,0],la=[0,0,0],fa=d3.scaleTime(),ma=d3.scaleLinear(),qa=d3.timeFormat("%e %b"),na=d3.line(),oa=null,ca=null,Z={init:function(){r=F.append("svg").attr("class","scroll-svg");A();B=r.append("g").attr("class","g-axis");oa=B.append("g").attr("class","axis-x");ca=B.append("g").attr("class","axis-y");
K=r.append("g").attr("class","g-map");K.append("path").attr("class","path-sphere");K.append("g").attr("class","g-countries");M=r.append("g").attr("class","g-vis");L=M.append("g").attr("class","g-anno");L.append("line").attr("class","anno-line");L.append("text").attr("class","anno-label").attr("text-anchor","end").text("US Declares National Emergency");M.append("g").attr("class","g-lines");Object(c.a)("./custom.geojson").then(function(D){H(D)})},resize:function(){u=F.node().offsetWidth-30-30;x=F.node().offsetHeight-
25-50;r.attr("width",u+30+30).attr("height",x+25+50);fa.domain(d3.extent(I[0].values,function(G){return G.date})).nice().range([30,u-30]).clamp(!0);ma.domain([0,100]).nice().range([x,0]);na.x(function(G){return fa(G.date)}).y(function(G){return ma(G.views)}).curve(d3.curveNatural);L.attr("transform","translate(".concat(fa(C),", 0)"));L.select("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",x);var D=fa(C)-fa(new Date(2020,0,30)),w=.3*x;K.select("rect").attr("width",D).attr("height",w);y&&
H(y);return Z},render:function(D){M.select(".g-lines").selectAll(".g-trend").selectAll("*").transition().duration(0);M.attr("transform","translate(".concat(30,", ").concat(25,")"));var w=M.select(".g-lines");K.attr("transform","translate(".concat(30,", ").concat(25,")"));2!==D&&K.selectAll(".path-country").classed("highlighted",!0);if("setup"!==D){w=w.selectAll(".g-trend").data(I,function(t){return"".concat(t.key,"-").concat(t.values[0].trend)});var G=w.enter().append("g").attr("class",function(t){return"g-trend g-trend__".concat(t.key)}).classed("countryLine",
function(t){return"global"!==t.key});w.exit().remove();w=G.merge(w);G.append("path").attr("class","trend");var Q=I.map(function(t){return t.key});w.selectAll(".trend").style("stroke","url(#stroke-gradient-scroll)").attr("data-iso",function(t){return t.key}).attr("d",function(t){return na(t.values)}).attr("stroke-dasharray",function(t,N,J){t=J[N].getTotalLength();return"0, ".concat(t)}).attr("opacity",1).transition().duration(2E3).delay(function(t,N){return 2500*Q.findIndex(function(J){return J===
t.key})}).on("start",function(t,N,J){if(2===D){var U=d3.select(J[N]).attr("data-iso");t=y.features.filter(function(T){return T.properties.iso_a2===U})[0];ia=d3.geoCentroid(t);ka=la;la=[-ia[0],20-ia[1],0];var X=l(ka,la),Y=K.selectAll(".path-country");d3.transition().duration(500).tween("render",function(){return function(T){O.rotate(X(T));Y.attr("d",P).classed("highlighted",function(V){return V.properties.iso_a2===U})}})}}).ease(d3.easeLinear).attrTween("stroke-dasharray",function(t,N,J){t=J[N].getTotalLength();
return d3.interpolate("0,".concat(t),"".concat(t,",").concat(t))}).on("end",function(t,N,J){2===D&&d3.select(J[N]).transition().delay(500).attr("opacity",.25)});G=G.append("g").attr("class","trend-end");G.append("circle").attr("class","trend-cap").attr("r",5).attr("cx",0).attr("cy",0);G=G.append("g").attr("class","trend-label");G.append("text").attr("class","trend-label-text trend-label-bg");G.append("text").attr("class","trend-label-text trend-label-fg");G.selectAll(".trend-label-text").text(function(t,
N,J){N=t.values[0].trend;return 2>D?"global ".concat(N," views"):"".concat(t.values[0].marketName)}).attr("text-anchor","end").attr("alignment-baseline","hanging");w.selectAll(".trend-end").attr("opacity",0).transition().duration(0).delay(function(t,N){return 2500*Q.findIndex(function(J){return J===t.key})}).attr("opacity",1).transition().duration(2E3).ease(d3.easeLinear).attrTween("transform",q).on("end",function(t,N,J){2===D&&d3.select(J[N]).transition().delay(500).attr("opacity",.25)})}oa.call(d3.axisBottom(fa).tickFormat(qa).ticks(2).tickValues([new Date(2020,
1,1),new Date(2020,4,1)])).attr("transform","translate(0, ".concat(x+25,")")).call(function(t){return t.select(".domain").remove()});ca.call(d3.axisLeft(ma).tickSize(-u+30)).attr("transform","translate(".concat(30,", ").concat(25,")")).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.selectAll(".tick text").attr("x",-8)});return Z},data:function(D){if(!arguments.length)return I;I=D;F.datum(I);return Z}};Z.init();return Z});return 1<h.length?h:h.pop()}},160:function(a,
f){d3.selection.prototype.ridgeTemplate=function(b){b=this.nodes().map(function(d){var c=d3.select(d),h=null,e=null,m=null,g=null,k=c.attr("data-section"),l=c.datum(),q=new Date(2020,2,15);d=l.values[0].values.map(function(x){return x.date});d=d3.extent(d);var A=Math.round((q-d[0])/(d[1]-d[0])*100),H=0,F=0,r=d3.scaleTime(),B=d3.scaleLinear(),M=d3.scalePoint(),L=d3.timeFormat("%e %b"),K=d3.area(),I=null,y=d3.area(),C=null,z=null,R=d3.scaleOrdinal().domain(["social","selfcare","identity"]).range(["#AE5590",
"#8759A3","#1460AA"])(k),u={init:function(){h=c.append("svg").attr("class","ridge-svg");e=h.append("g").attr("class","g-axis");C=e.append("g").attr("class","axis-x");m=h.append("g").attr("class","g-vis");m.append("g").attr("class","g-lines");var x=h.append("defs");z=x.append("linearGradient").attr("id","linear-gradient-".concat(k));z.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");z.append("stop").attr("offset","0%").attr("stop-color",R).attr("stop-opacity","100%");z.append("stop").attr("offset",
"100%").attr("stop-color","#FFFFFF").attr("stop-opacity","100%");var O=x.append("linearGradient").attr("id","gray-gradient");O.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");O.append("stop").attr("offset","0%").attr("stop-color","#DBDDE0").attr("stop-opacity","100%");O.append("stop").attr("offset","100%").attr("stop-color","#FFFFFF").attr("stop-opacity","100%");x=x.append("linearGradient").attr("id","stroke-gradient-".concat(k));x.attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2",
"0%");x.append("stop").attr("offset","".concat(A,"%")).attr("stop-color","#DBDDE0").attr("stop-opacity","100%");x.append("stop").attr("offset","".concat(A,"%")).attr("stop-color",R).attr("stop-opacity","100%");g=m.append("text").attr("class","anno").text("US National Emergency").attr("text-anchor","middle").attr("alignment-baseline","middle").style("font-size","12px").style("fill","#757575")},resize:function(){H=c.node().offsetWidth-0;F=c.node().offsetHeight-20-25;h.attr("width",H+0+0).attr("height",
F+20+25);r.domain(d3.extent(l.values[0].values,function(x){return x.date})).range([0,H]).clamp(!0);M.domain(l.values.map(function(x){return x.key})).range([20,F-25]);B.domain([0,100]).nice().range([0,-1.5*M.step()]);K.curve(d3.curveNatural).x(function(x){return r(x.date)}).y0(0).y1(function(x){return B(x.views)});I=K.lineY1();y.curve(d3.curveNatural).x(function(x){return r(x.date)}).y0(0).y1(function(x){return B(x.views)});g.attr("transform","translate(".concat(r(q),", ").concat(F-12,")"));return u},
render:function(){m.attr("transform","translate(".concat(0,", ").concat(45,")"));var x=m.select(".g-lines").selectAll(".g-trend").data(l.values,function(P){return P.key}),O=x.enter().append("g").attr("class",function(P){return"g-trend g-trend__".concat(P.key)});x.exit().remove();x=O.merge(x).attr("transform",function(P,ha){return"translate(0, ".concat(M(P.key)+1,")")});O.append("path").attr("class","trend");x.selectAll(".trend").attr("d",function(P){return I(P.values)}).style("stroke","url(#stroke-gradient-".concat(k,
")"));O.append("path").attr("class","trend-area");x.selectAll(".trend-area").attr("d",function(P){P=P.values.filter(function(ha){return ha.date>=q});return K(P)}).style("fill","url(#linear-gradient-".concat(k,")"));O.append("path").attr("class","trend-area--gray");x.selectAll(".trend-area--gray").attr("d",function(P){P=P.values.filter(function(ha){return ha.date<=q});return K(P)}).style("fill","url(#gray-gradient)");O=O.append("g").attr("class","trend-end");x=O.append("g").attr("class","trend-label");
x.append("text").attr("class","trend-label-bg").text(function(P){return P.key}).attr("text-anchor","start").attr("alignment-baseline","hanging");x.append("text").attr("class","trend-label-fg").text(function(P){return P.key}).attr("text-anchor","start").attr("alignment-baseline","hanging");O.attr("transform","translate(0, ".concat(-20,")"));C.call(d3.axisBottom(r).tickFormat(L).ticks(2).tickValues([new Date(2020,1,1),new Date(2020,4,1)])).attr("transform","translate(".concat(0,", ").concat(F+20,")")).call(function(P){return P.select(".domain").remove()}).call(function(P){return P.selectAll(".tick text").attr("y",
8).style("text-anchor",function(ha,ia,ka){return ka[ia].parentNode.nextSibling?"start":"end"})});return u},data:function(x){if(!arguments.length)return l;l=x;c.datum(l);return u}};u.init();return u});return 1<b.length?b:b.pop()}},161:function(a,f){d3.selection.prototype.cardGlobe=function(b){b=this.nodes().map(function(d){var c=d3.select(d),h=null,e=null,m=c.datum(),g=0,k=0,l=d3.geoOrthographic(),q=d3.geoPath(l),A={type:"Sphere"},H=d3.scaleOrdinal().domain(["social","selfcare","identity"]).range(["#AE5590",
"#8759A3","#1460AA"])(m.thisSection),F={init:function(){h=c.append("svg").attr("class","pudding-chart");e=h.append("g").attr("class","g-vis");e.append("path").attr("class","path-sphere");e.append("g").attr("class","g-countries")},resize:function(){g=c.node().offsetWidth-0-5;k=c.node().offsetHeight-5-10;h.attr("width",g+0+5).attr("height",k+5+10);return F},render:function(){e.attr("transform","translate(".concat(0,", ").concat(5,")"));var r=m.GEO.features.filter(function(B){return B.properties.iso_a2===
m.thisMarket})[0];r=d3.geoCentroid(r);r=[-r[0],20-r[1],0];l.fitSize([g,k],m.GEO).rotate(r);e.select(".path-sphere").attr("d",q(A)).style("fill","white").style("stroke-width","1px").style("stroke",H).style("stroke-opacity",.25).lower();r=e.select(".g-countries").selectAll(".path-country").data(m.GEO.features);r.exit().remove();r.enter().append("path").attr("class",function(B){return"path-country country-".concat(B.properties.iso_a2)}).merge(r).attr("d",q).style("fill",H).style("opacity",function(B){return B.properties.iso_a2===
m.thisMarket?1:.25});return F},data:function(r){if(!arguments.length)return m;m=r;c.datum(m);return F}};F.init();return F});return 1<b.length?b:b.pop()}},162:function(a,f){d3.selection.prototype.legendTemplate=function(b){b=this.nodes().map(function(d){var c=d3.select(d),h=null,e=null,m=null,g=c.attr("data-section"),k=c.datum(),l=new Date(2020,2,15);d=k.values.map(function(z){return z.date});var q=d3.extent(d),A=Math.round((l-q[0])/(q[1]-q[0])*100),H=0,F=0,r=d3.scaleTime(),B=d3.scaleLinear(),M=d3.area(),
L=null,K=d3.area(),I=null,y=[[0,0],[0,6],[6,3]],C={init:function(){h=c.append("svg").attr("class","ridge-svg");e=h.append("g").attr("class","g-axis");var z=e.append("g").attr("class","g-xAxis");z.append("path").attr("class","pre-bracket");z.append("text").attr("class","label pre-label").text("before");z.append("path").attr("class","post-bracket");z.append("text").attr("class","label post-label").text("after national emergency");z=e.append("g").attr("class","g-yAxis");z.append("text").attr("class",
"yLabel yLabel-more").text("more views*");z.append("text").attr("class","yLabel ylabel-fewer").text("fewer views*");z.append("path").attr("class","arrow-more");z.append("path").attr("class","arrow-fewer");m=h.append("g").attr("class","g-vis");m.append("g").attr("class","g-lines");z=h.append("defs");I=z.append("linearGradient").attr("id","linear-gradient-".concat(g));I.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");I.append("stop").attr("offset","0%").attr("stop-color","#FFFFFF").attr("stop-opacity",
"100%");I.append("stop").attr("offset","100%").attr("stop-color","#FFFFFF").attr("stop-opacity","0%");var R=z.append("linearGradient").attr("id","gray-gradient");R.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");R.append("stop").attr("offset","0%").attr("stop-color","#DBDDE0").attr("stop-opacity","100%");R.append("stop").attr("offset","100%").attr("stop-color","#DBDDE0").attr("stop-opacity","0%");z=z.append("linearGradient").attr("id","stroke-gradient-".concat(g));z.attr("x1","0%").attr("y1",
"0%").attr("x2","100%").attr("y2","0%");z.append("stop").attr("offset","".concat(A,"%")).attr("stop-color","#DBDDE0").attr("stop-opacity","100%");z.append("stop").attr("offset","".concat(A,"%")).attr("stop-color","#FFFFFF").attr("stop-opacity","100%");h.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,6,6]).attr("refX",3).attr("refY",3).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto-start-reverse").append("path").attr("d",d3.line()(y)).attr("stroke","#FFFFFF").attr("fill",
"#FFFFFF")},resize:function(){H=c.node().offsetWidth-0-80;F=c.node().offsetHeight-10-40;h.attr("width",H+0+80).attr("height",F+10+40);r.domain(d3.extent(k.values,function(z){return z.date})).range([0,H]).clamp(!0);B.domain([0,100]).range([F-40,0]);M.curve(d3.curveNatural).x(function(z){return r(z.date)}).y0(B(0)).y1(function(z){return B(+z.views)});L=M.lineY1();K.curve(d3.curveNatural).x(function(z){return r(z.date)}).y0(B(0)).y1(function(z){return B(+z.views)});return C},render:function(){m.attr("transform",
"translate(".concat(0,", ").concat(50,")"));e.attr("transform","translate(".concat(0,", ").concat(50,")"));var z=m.select(".g-lines").selectAll(".g-trend").data([k]),R=z.enter().append("g").attr("class",function(u){return"g-trend g-trend__".concat(u.key)});z.exit().remove();z=R.merge(z);R.append("path").attr("class","trend");z.selectAll(".trend").attr("d",function(u){return L(u.values)}).style("stroke","url(#stroke-gradient-".concat(g,")")).style("fill","none");R.append("path").attr("class","trend-area");
z.selectAll(".trend-area").attr("d",function(u){u=u.values.filter(function(x){return x.date>=l});return M(u)}).style("fill","url(#linear-gradient-".concat(g,")"));R.append("path").attr("class","trend-area--gray");z.selectAll(".trend-area--gray").attr("d",function(u){u=u.values.filter(function(x){return x.date<=l});return M(u)}).style("fill","url(#gray-gradient)");e.selectAll(".label").attr("transform",function(u,x,O){u=d3.select(O[x]).classed("pre-label");x=new Date((l.getTime()+q[0].getTime())/2);
O=new Date((l.getTime()+q[1].getTime())/2);return"translate(".concat(u?r(x):r(O),", ").concat(F-40+16,")")}).attr("text-anchor","middle").attr("alignment-baseline","hanging").style("font-size","12px").style("fill","#FFFFFF");e.select(".pre-bracket").style("stroke","#FFFFFF").style("fill","none").style("stroke-width","1px").attr("d",function(){var u=r(q[0]),x=B(0)+8,O=B(0)-10+8,P=r(l)-2;return"M".concat(u,", ").concat(O,"\n                  L").concat(u,", ").concat(x,"\n                  L").concat(P,
", ").concat(x,"\n                  L").concat(P,", ").concat(O,"\n              ")});e.select(".post-bracket").style("stroke","#FFFFFF").style("fill","none").style("stroke-width","1px").attr("d",function(){var u=r(l)+2,x=B(0)+8,O=B(0)-10+8,P=r(q[1]);return"M".concat(u,", ").concat(O,"\n                L").concat(u,", ").concat(x,"\n                L").concat(P,", ").concat(x,"\n                L").concat(P,", ").concat(O,"\n            ")});e.selectAll(".yLabel").attr("text-anchor","start").attr("alignment-baseline",
"hanging").style("font-size","12px").style("fill","#FFFFFF").attr("transform",function(u,x,O){u=d3.select(O[x]).classed("yLabel-more");return"translate(".concat(H+12,",").concat(u?B(75):B(25),")")});e.select(".arrow-more").attr("d",d3.line()([[H+8,B(60)],[H+8,B(90)]])).attr("stroke","#FFFFFF").attr("marker-end","url(#arrow)").attr("fill","none");e.select(".arrow-fewer").attr("d",d3.line()([[H+8,B(40)],[H+8,B(10)]])).attr("stroke","#FFFFFF").attr("marker-end","url(#arrow)").attr("fill","none");return C},
data:function(z){if(!arguments.length)return k;k=z;c.datum(k);return C}};C.init();return C});return 1<b.length?b:b.pop()}},163:function(a,f,b){},20:function(a,f,b){var d=b(47),c=b(48),h=b(41),e=b(49);a.exports=function(m){return d(m)||c(m)||h(m)||e()};a.exports.__esModule=!0;a.exports["default"]=a.exports},21:function(a,f){function b(d){"@babel/helpers - typeof";return a.exports=b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==
typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},a.exports.__esModule=!0,a.exports["default"]=a.exports,b(d)}a.exports=b;a.exports.__esModule=!0;a.exports["default"]=a.exports},22:function(a,f,b){b.d(f,"a",function(){return d});var d={js:function(){return!0},ios:function(c,h){return/(iPhone|iPod|iPad)/i.test(h)},mac:function(c,h){return/(Mac)/i.test(h)},"mac-or-ios":function(c,h){return d.mac(c,h)||d.ios(c,h)},android:function(c,h){return/(Android)/i.test(h)},ontouchstart:function(c){return"ontouchstart"in
c},mobile:function(c,h){return d.android(c,h)||d.ios(c,h)||/(webOS)/i.test(h)||/(BlackBerry)/i.test(h)||/(Windows Phone)/i.test(h)}}},28:function(a,f,b){var d=b(75),c=b(76),h=b(41),e=b(77);a.exports=function(m,g){return d(m)||c(m,g)||h(m,g)||e()};a.exports.__esModule=!0;a.exports["default"]=a.exports},29:function(a,f,b){b.d(f,"a",function(){return m});a=b(3);var d=b.n(a);a=b(4);var c=b.n(a);a=b(0);var h=b.n(a),e=b(22),m=function(){function g(){var k=this,l=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:navigator.userAgent,q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;d()(this,g);h()(this,"htmlEl",void 0);h()(this,"window",void 0);h()(this,"userAgent",void 0);this.htmlEl=document.documentElement;this.window=q;this.userAgent=l;Object.keys(e.a).forEach(function(A){var H=(0,e.a[A])(q,l);k[A]=e.a[A](q,l);k.htmlEl.classList.toggle(k.getClass(A,!0),H);k.htmlEl.classList.toggle(k.getClass(A,!1),!H)})}c()(g,[{key:"test",value:function(k){return e.a[k](this.window,this.userAgent)}},
{key:"getClass",value:function(k,l){return"".concat(l?"":"no-").concat(k)}}]);return g}()},3:function(a,f){a.exports=function(b,d){if(!(b instanceof d))throw new TypeError("Cannot call a class as a function");};a.exports.__esModule=!0;a.exports["default"]=a.exports},35:function(a,f,b){var d=b(21)["default"],c=b(42);a.exports=function(h){h=c(h,"string");return"symbol"===d(h)?h:String(h)};a.exports.__esModule=!0;a.exports["default"]=a.exports},38:function(a,f){a.exports=function(b,d){if(null==d||d>
b.length)d=b.length;for(var c=0,h=Array(d);c<d;c++)h[c]=b[c];return h};a.exports.__esModule=!0;a.exports["default"]=a.exports},4:function(a,f,b){function d(h,e){for(var m=0;m<e.length;m++){var g=e[m];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(h,c(g.key),g)}}var c=b(35);a.exports=function(h,e,m){e&&d(h.prototype,e);m&&d(h,m);Object.defineProperty(h,"prototype",{writable:!1});return h};a.exports.__esModule=!0;a.exports["default"]=a.exports},41:function(a,
f,b){var d=b(38);a.exports=function(c,h){if(c){if("string"===typeof c)return d(c,h);var e=Object.prototype.toString.call(c).slice(8,-1);"Object"===e&&c.constructor&&(e=c.constructor.name);if("Map"===e||"Set"===e)return Array.from(c);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return d(c,h)}};a.exports.__esModule=!0;a.exports["default"]=a.exports},42:function(a,f,b){var d=b(21)["default"];a.exports=function(c,h){if("object"!==d(c)||null===c)return c;var e=c[Symbol.toPrimitive];
if(void 0!==e){c=e.call(c,h||"default");if("object"!==d(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===h?String:Number)(c)};a.exports.__esModule=!0;a.exports["default"]=a.exports},47:function(a,f,b){var d=b(38);a.exports=function(c){if(Array.isArray(c))return d(c)};a.exports.__esModule=!0;a.exports["default"]=a.exports},48:function(a,f){a.exports=function(b){if("undefined"!==typeof Symbol&&null!=b[Symbol.iterator]||null!=b["@@iterator"])return Array.from(b)};
a.exports.__esModule=!0;a.exports["default"]=a.exports},49:function(a,f){a.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};a.exports.__esModule=!0;a.exports["default"]=a.exports},53:function(a,f,b){b.d(f,"a",function(){return c});a=b(4);a=b.n(a);f=b(3);var d=b.n(f),c=a()(function e(){function m(q,A){void 0===A&&(A=document);return"string"===typeof q?Array.from(A.querySelectorAll(q)):
q instanceof Element?[q]:q instanceof NodeList?Array.from(q):q instanceof Array?q:[]}function g(q){var A=q.id,H=q.offsetVal;q=q.stepEl[0].className;var F=document.createElement("div");F.id="scrollama__debug-offset--"+A;F.className="scrollama__debug-offset";F.style.position="fixed";F.style.left="0";F.style.width="100%";F.style.height="0";F.style.borderTop="2px dashed black";F.style.zIndex="9999";A=document.createElement("p");A.innerText='".'+q+'" trigger: '+H;A.style.fontSize="12px";A.style.fontFamily=
"monospace";A.style.color="black";A.style.margin="0";A.style.padding="6px";F.appendChild(A);document.body.appendChild(F)}function k(q){var A=q.offsetMargin;document.getElementById("scrollama__debug-offset--"+q.id).style.top=A+"px"}function l(q){var A=q.state,H="scrollama__debug-step--"+q.id+"-"+q.index;q=document.getElementById(H+"_above");H=document.getElementById(H+"_below");A="enter"===A?"block":"none";q&&(q.style.display=A);H&&(H.style.display=A)}d()(this,e);return function(){function q(){var n=
Date.now();return""+[0,0,0].map(function(p){return"abcdefghijklmnopqrstuv"[Math.floor(22*Math.random())]}).join("")+n}function A(n){return n.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function H(){var n=document.body,p=document.documentElement;return Math.max(n.scrollHeight,n.offsetHeight,p.clientHeight,p.scrollHeight,p.offsetHeight)}function F(n){return+n.getAttribute("data-scrollama-index")}function r(){window.pageYOffset>Y?da="down":window.pageYOffset<Y&&(da="up");
Y=window.pageYOffset}function B(n){Z[n]&&Z[n].forEach(function(p){return p.disconnect()})}function M(){U=window.innerHeight;X=H();J=N*U;V&&(G=w.map(function(n){return n.getBoundingClientRect().height}),Q=w.map(A),ba&&fa());aa&&k({id:D,stepOffsetHeight:G,offsetMargin:J,offsetVal:N})}function L(n){if(n&&!ba)if(V)fa();else{console.error("scrollama error: enable() called before scroller was ready");ba=!1;return}!n&&ba&&oa.forEach(B);ba=n}function K(n,p){var E=F(n);void 0!==p&&(t[E].progress=p);n={element:n,
index:E,progress:t[E].progress};"enter"===t[E].state&&ca.stepProgress(n)}function I(n,p){if("above"===p)for(p=0;p<n;p+=1){var E=t[p];"enter"!==E.state&&"down"!==E.direction?(y(w[p],"down",!1),C(w[p],"down")):"enter"===E.state&&C(w[p],"down")}else if("below"===p)for(p=t.length-1;p>n;--p)E=t[p],"enter"===E.state&&C(w[p],"up"),"down"===E.direction&&(y(w[p],"up",!1),C(w[p],"up"))}function y(n,p,E){void 0===E&&(E=!0);var S=F(n),W={element:n,index:S,direction:p};t[S].direction=p;t[S].state="enter";ra&&
E&&"down"===p&&I(S,"above");ra&&E&&"up"===p&&I(S,"below");ca.stepEnter&&!ta[S]&&(ca.stepEnter(W,t),aa&&l({id:D,index:S,state:"enter"}),ua&&(ta[S]=!0));pa&&K(n)}function C(n,p){var E=F(n),S={element:n,index:E,direction:p};pa&&("down"===p&&1>t[E].progress?K(n,1):"up"===p&&0<t[E].progress&&K(n,0));t[E].direction=p;t[E].state="exit";ca.stepExit(S,t);aa&&l({id:D,index:E,state:"exit"})}function z(n){var p=n[0];r();n=p.isIntersecting;var E=p.boundingClientRect;p=p.target;var S=E.top-J;E=E.bottom-J;var W=
F(p);W=t[W];n&&0>=S&&0<=E&&"down"===da&&"enter"!==W.state&&y(p,da);!n&&0<S&&"up"===da&&"enter"===W.state&&C(p,da)}function R(n){var p=n[0];r();n=p.isIntersecting;var E=p.boundingClientRect;p=p.target;var S=E.top-J;E=E.bottom-J;var W=F(p);W=t[W];n&&0>=S&&0<=E&&"up"===da&&"enter"!==W.state&&y(p,da);!n&&0>E&&"down"===da&&"enter"===W.state&&C(p,da)}function u(n){var p=n[0];r();n=p.isIntersecting;p=p.target;var E=F(p);E=t[E];n&&"down"===da&&"down"!==E.direction&&"enter"!==E.state&&(y(p,"down"),C(p,"down"))}
function x(n){var p=n[0];r();n=p.isIntersecting;p=p.target;var E=F(p);E=t[E];n&&"up"===da&&"down"===E.direction&&"enter"!==E.state&&(y(p,"up"),C(p,"up"))}function O(n){n=n[0];r();var p=n.intersectionRatio,E=n.target,S=n.boundingClientRect.bottom-J;n.isIntersecting&&0<=S&&K(E,+p.toFixed(3))}function P(){Z.viewportAbove=w.map(function(n,p){p=new IntersectionObserver(u,{rootMargin:X-Q[p]+"px 0px "+(J-U-G[p])+"px 0px"});p.observe(n);return p})}function ha(){Z.viewportBelow=w.map(function(n,p){p=new IntersectionObserver(x,
{rootMargin:-J-G[p]+"px 0px "+(J-U+G[p]+X)+"px 0px"});p.observe(n);return p})}function ia(){Z.stepAbove=w.map(function(n,p){p=new IntersectionObserver(z,{rootMargin:-J+G[p]+"px 0px "+(J-U)+"px 0px"});p.observe(n);return p})}function ka(){Z.stepBelow=w.map(function(n,p){p=new IntersectionObserver(R,{rootMargin:-J+"px 0px "+(J-U+G[p])+"px 0px"});p.observe(n);return p})}function la(){Z.stepProgress=w.map(function(n,p){var E=G[p]-J+"px 0px "+(-U+J)+"px 0px";p=Math.ceil(G[p]/T);for(var S=[],W=1/p,ja=0;ja<
p;ja+=1)S.push(ja*W);E=new IntersectionObserver(O,{rootMargin:E,threshold:S});E.observe(n);return E})}function fa(){oa.forEach(B);P();ha();ia();ka();pa&&la()}function ma(){w.forEach(function(n,p){return n.setAttribute("data-scrollama-index",p)})}function qa(){t=w.map(function(){return{direction:null,state:null,progress:0}})}function na(n){if(n&&1===n.nodeType){var p=window.getComputedStyle(n);return("scroll"===p.overflowY||"auto"===p.overflowY)&&n.scrollHeight>n.clientHeight?n:na(n.parentNode)}return!1}
var oa=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],ca={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},Z={},D=null,w=[],G=[],Q=[],t=[],N=0,J=0,U=0,X=0,Y=0,T=0,V=!1,ba=!1,aa=!1,pa=!1,ra=!1,ua=!1,da="down",ta=[],ea={setup:function(n){var p=n.step,E=n.offset;void 0===E&&(E=.5);var S=n.progress;void 0===S&&(S=!1);var W=n.threshold;void 0===W&&(W=4);var ja=n.debug;void 0===ja&&(ja=!1);var sa=n.order;void 0===sa&&(sa=!0);n=n.once;void 0===n&&(n=!1);D=
q();w=m(p);if(!w.length)return console.error("scrollama error: no step elements"),ea;(p=w.reduce(function(va,wa){return va||na(wa.parentNode)},!1))&&console.error("scrollama error",p);aa=ja;pa=S;ra=sa;ua=n;ea.offsetTrigger(E);T=Math.max(1,+W);V=!0;aa&&g({id:D,stepEl:w,offsetVal:N});ma();qa();M();ea.enable();return ea},resize:function(){M();return ea},enable:function(){L(!0);return ea},disable:function(){L(!1);return ea},destroy:function(){L(!1);Object.keys(ca).forEach(function(n){ca[n]=null});Object.keys(Z).forEach(function(n){Z[n]=
null})},offsetTrigger:function(n){if(n&&!isNaN(n))return 1<n&&console.error("scrollama error: offset value is greater than 1. Fallbacks to 1."),0>n&&console.error("scrollama error: offset value is lower than 0. Fallbacks to 0."),N=Math.min(Math.max(0,n),1),ea;isNaN(n)&&console.error("scrollama error: offset value is not a number. Fallbacks to 0.");return N},onStepEnter:function(n){"function"===typeof n?ca.stepEnter=n:console.error("scrollama error: onStepEnter requires a function");return ea},onStepExit:function(n){"function"===
typeof n?ca.stepExit=n:console.error("scrollama error: onStepExit requires a function");return ea},onStepProgress:function(n){"function"===typeof n?ca.stepProgress=n:console.error("scrollama error: onStepProgress requires a function");return ea}};return ea}()})},71:function(a,f,b){function d(h){return new Promise(function(e,m){var g=h.split(".").pop();"csv"===g?d3.csv("/trends/static/deep-dive/covid-impact/assets/".concat(h)).then(e).catch(m):"json"===g||"geojson"===g?d3.json("/trends/static/deep-dive/covid-impact/assets/".concat(h)).then(e).catch(m):
m(Error("unsupported file type for: ".concat(h)))})}function c(h){if("string"===typeof h)return d(h);h=h.map(d);return Promise.all(h)}b.d(f,"a",function(){return c})},75:function(a,f){a.exports=function(b){if(Array.isArray(b))return b};a.exports.__esModule=!0;a.exports["default"]=a.exports},76:function(a,f){a.exports=function(b,d){var c=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=c){var h,e,m,g=[],k=!0,l=!1;try{if(e=(c=c.call(b)).next,0===d){if(Object(c)!==
c)return;k=!1}else for(;!(k=(h=e.call(c)).done)&&(g.push(h.value),g.length!==d);k=!0);}catch(A){l=!0;var q=A}finally{try{if(!k&&null!=c["return"]&&(m=c["return"](),Object(m)!==m))return}finally{if(l)throw q;}}return g}};a.exports.__esModule=!0;a.exports["default"]=a.exports},77:function(a,f){a.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};a.exports.__esModule=!0;
a.exports["default"]=a.exports}});}).call(this || window)
